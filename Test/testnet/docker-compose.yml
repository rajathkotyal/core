version: '3'
services:
  # core-bootstrap-validator:
  #   image: openmesh-core-testnet:latest
  #   deploy:
  #     replicas: 1
  #   ports:
  #     - "26656"
  #     - "26657"
  #     - "26658"
  #   volumes:
  #     - ./config:/core/conf
  #   networks:
  #     network1:
  #       ipv4_address: 192.168.20.30
  #   entrypoint: [ 'sh', '/core/bootstrap-entrypoint.sh' ]
  core-validator:
    image: openmesh-core-testnet:latest
    deploy:
      replicas: 20
    ports:
      - "26656"
      - "26657"
      - "26658"
    volumes:
      - ./config:/core/conf
    networks:
    - network1
    entrypoint: [ 'sh', '/core/entrypoint.sh' ]
networks:
  network1:
    driver: ipvlan
    ipam: 
      driver: ipvlan
      config:
        - subnet: "192.168.20.0/24"
